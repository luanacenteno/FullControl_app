(self.webpackChunkangle=self.webpackChunkangle||[]).push([[236],{3236:function(t,e,n){"use strict";n.r(e),n.d(e,{AuditoriasModule:function(){return le}});var r=n(1116),i=n(1462),a=n(5366);function o(t){return null!=t}function l(t){try{const e=new Date(t);return!isNaN(e.getTime())}catch(e){return!1}}function s(t){try{if(t._d instanceof Date){const e=t._d,n=+e.getMonth()+1,r=+e.getDate();return`${e.getFullYear()}-${u(n)}-${u(r)}`}if("object"==typeof t&&null!=t.year&&null!=t.month&&null!=t.day){const e=+t.day;return`${t.year}-${u(+t.month)}-${u(e)}`}}catch(e){}return t}function u(t){return t<10?`0${t}`:t}const d=t=>e=>{if(o(i.kI.required(e)))return null;const n=e.value;return Array.isArray(n)&&n.length>=+t?null:{arrayLength:{minLength:t}}},c=t=>o(i.kI.required(t))||/^(?:[A-Z0-9+\/]{4})*(?:[A-Z0-9+\/]{2}==|[A-Z0-9+\/]{3}=|[A-Z0-9+\/]{4})$/i.test(t.value)?null:{base64:!0},g=t=>{if(o(i.kI.required(t)))return null;const e=t.value.replace(/[^0-9]+/g,"");if(!/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11}|(?:9792)\d{12})$/.test(e))return{creditCard:!0};let n,r,a,l=0;for(let i=e.length-1;i>=0;i--)n=e.substring(i,i+1),r=parseInt(n,10),a?(r*=2,l+=r>=10?r%10+1:r):l+=r,a=!a;return Boolean(l%10==0&&e)?null:{creditCard:!0}},h=t=>{if(o(i.kI.required(t)))return null;let e=t.value;return e=s(e),l(e)?null:{date:!0}},f=t=>o(i.kI.required(t))||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t.value)?null:{dateISO:!0},p=t=>o(i.kI.required(t))||/^\d+$/.test(t.value)?null:{digits:!0},m=t=>o(i.kI.required(t))||/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.value)?null:{email:!0},v=t=>e=>o(i.kI.required(e))||t===e.value?null:{equal:{value:t}},C=t=>{let e=!1;return n=>(e||(e=!0,t.valueChanges.subscribe(()=>{n.updateValueAndValidity()})),t.value===n.value?null:{equalTo:{control:t,value:t.value}})},Z=t=>e=>o(t)?o(i.kI.required(e))||+e.value>+t?null:{gt:{value:t}}:null,q=t=>e=>o(t)?o(i.kI.required(e))||+e.value>=+t?null:{gte:{value:t}}:null,T=t=>{if(o(i.kI.required(t)))return null;const e=t.value;try{const t=JSON.parse(e);if(Boolean(t)&&"object"==typeof t)return null}catch(n){}return{json:!0}},A=t=>e=>o(t)?o(i.kI.required(e))||+e.value<+t?null:{lt:{value:t}}:null,x=t=>e=>o(t)?o(i.kI.required(e))||+e.value<=+t?null:{lte:{value:t}}:null,b=t=>e=>o(t)?o(i.kI.required(e))||+e.value<=+t?null:{max:{value:t}}:null,w=t=>{let e,n=!1,r=t;const a=t instanceof i.NI||t instanceof i.On;return u=>{if(!n&&a&&(n=!0,t.valueChanges.subscribe(()=>{u.updateValueAndValidity()})),a&&(r=t.value),e=s(r),!(l(e)||e instanceof Function)){if(null==e)return null;if(a)return{maxDate:{error:"maxDate is invalid"}};throw Error("maxDate value must be or return a formatted date")}if(o(i.kI.required(u)))return null;const d=new Date(s(u.value)).getTime();return l(d)?(e instanceof Function&&(e=e()),d<=new Date(e).getTime()?null:a?{maxDate:{control:t,value:t.value}}:{maxDate:{value:r,control:void 0}}):{value:!0}}},_=t=>e=>o(t)?o(i.kI.required(e))||+e.value>=+t?null:{min:{value:t}}:null,y=t=>{let e,n=!1,r=t;const a=t instanceof i.NI||t instanceof i.On;return u=>{if(!n&&a&&(n=!0,t.valueChanges.subscribe(()=>{u.updateValueAndValidity()})),a&&(r=t.value),e=s(r),!(l(e)||e instanceof Function)){if(null==e)return null;if(a)return{minDate:{error:"minDate is invalid"}};throw Error("minDate value must be or return a formatted date")}if(o(i.kI.required(u)))return null;const d=new Date(s(u.value)).getTime();return l(d)?(e instanceof Function&&(e=e()),d>=new Date(e).getTime()?null:a?{minDate:{control:t,value:t.value}}:{minDate:{value:r,control:void 0}}):{value:!0}}},O=t=>e=>o(i.kI.required(e))||t!==e.value?null:{notEqual:{value:t}},I=t=>{let e=!1;return n=>{e||(e=!0,t.valueChanges.subscribe(()=>{n.updateValueAndValidity()}));const r=n.value;return null==t.value&&null==r||t.value!==r?null:{notEqualTo:{control:t,value:t.value}}}},k=t=>o(i.kI.required(t))||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t.value)?null:{number:!0},D=t=>e=>{if(o(i.kI.required(e)))return null;const n=t.split(","),r=e.value;let a=!0;for(const t of n)if(null==r[t]){a=!1;break}return a?null:{hasProperty:{value:t}}},N=t=>e=>{if(!o(t))return null;if(o(i.kI.required(e)))return null;const n=+e.value;return n>=t[0]&&n<=t[1]?null:{range:{value:t}}},E=t=>e=>{if(!o(t))return null;if(o(i.kI.required(e)))return null;const n=e.value;return n.length>=t[0]&&n.length<=t[1]?null:{rangeLength:{value:t}}},F={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},M=t=>e=>{if(o(i.kI.required(e)))return null;const n=e.value;return new RegExp(F[t]||F.all).test(n)?null:{uuid:!0}},G=t=>o(i.kI.required(t))||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t.value)?null:{url:!0},j={provide:i.Cf,useExisting:(0,a.Gpc)(()=>V),multi:!0};let V=(()=>{let t=class{ngOnInit(){this.validator=d(this.arrayLength)}ngOnChanges(t){for(const e in t)"arrayLength"===e&&(this.validator=d(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","arrayLength","","formControlName",""],["","arrayLength","","formControl",""],["","arrayLength","","ngModel",""]],inputs:{arrayLength:"arrayLength"},features:[a._Bn([j]),a.TTD]}),t})();const J={provide:i.Cf,useExisting:(0,a.Gpc)(()=>U),multi:!0};let U=(()=>{let t=class{validate(t){return c(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","base64","","formControlName",""],["","base64","","formControl",""],["","base64","","ngModel",""]],features:[a._Bn([J])]}),t})();const B={provide:i.Cf,useExisting:(0,a.Gpc)(()=>L),multi:!0};let L=(()=>{let t=class{validate(t){return g(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","creditCard","","formControlName",""],["","creditCard","","formControl",""],["","creditCard","","ngModel",""]],features:[a._Bn([B])]}),t})();const S={provide:i.Cf,useExisting:(0,a.Gpc)(()=>Q),multi:!0};let Q=(()=>{let t=class{validate(t){return h(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","date","","formControlName",""],["","date","","formControl",""],["","date","","ngModel",""]],features:[a._Bn([S])]}),t})();const Y={provide:i.Cf,useExisting:(0,a.Gpc)(()=>z),multi:!0};let z=(()=>{let t=class{validate(t){return f(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","dateISO","","formControlName",""],["","dateISO","","formControl",""],["","dateISO","","ngModel",""]],features:[a._Bn([Y])]}),t})();const H={provide:i.Cf,useExisting:(0,a.Gpc)(()=>R),multi:!0};let R=(()=>{let t=class{validate(t){return p(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","digits","","formControlName",""],["","digits","","formControl",""],["","digits","","ngModel",""]],features:[a._Bn([H])]}),t})();const W={provide:i.Cf,useExisting:(0,a.Gpc)(()=>P),multi:!0};let P=(()=>{let t=class{validate(t){return m(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","ngvemail","","formControlName",""],["","ngvemail","","formControl",""],["","ngvemail","","ngModel",""]],features:[a._Bn([W])]}),t})();const X={provide:i.Cf,useExisting:(0,a.Gpc)(()=>K),multi:!0};let K=(()=>{let t=class{ngOnInit(){this.validator=v(this.equal)}ngOnChanges(t){for(const e in t)"equal"===e&&(this.validator=v(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","equal","","formControlName",""],["","equal","","formControl",""],["","equal","","ngModel",""]],inputs:{equal:"equal"},features:[a._Bn([X]),a.TTD]}),t})();const tt={provide:i.Cf,useExisting:(0,a.Gpc)(()=>et),multi:!0};let et=(()=>{let t=class{ngOnInit(){this.validator=C(this.equalTo)}validate(t){return this.validator(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","equalTo","","formControlName",""],["","equalTo","","formControl",""],["","equalTo","","ngModel",""]],inputs:{equalTo:"equalTo"},features:[a._Bn([tt])]}),t})();const nt={provide:i.Cf,useExisting:(0,a.Gpc)(()=>rt),multi:!0};let rt=(()=>{let t=class{ngOnInit(){this.validator=Z(this.gt)}ngOnChanges(t){for(const e in t)"gt"===e&&(this.validator=Z(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","gt","","formControlName",""],["","gt","","formControl",""],["","gt","","ngModel",""]],inputs:{gt:"gt"},features:[a._Bn([nt]),a.TTD]}),t})();const it={provide:i.Cf,useExisting:(0,a.Gpc)(()=>at),multi:!0};let at=(()=>{let t=class{ngOnInit(){this.validator=q(this.gte)}ngOnChanges(t){for(const e in t)"gte"===e&&(this.validator=q(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","gte","","formControlName",""],["","gte","","formControl",""],["","gte","","ngModel",""]],inputs:{gte:"gte"},features:[a._Bn([it]),a.TTD]}),t})();const ot={provide:i.Cf,useExisting:(0,a.Gpc)(()=>lt),multi:!0};let lt=(()=>{let t=class{validate(t){return T(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","json","","formControlName",""],["","json","","formControl",""],["","json","","ngModel",""]],features:[a._Bn([ot])]}),t})();const st={provide:i.Cf,useExisting:(0,a.Gpc)(()=>ut),multi:!0};let ut=(()=>{let t=class{ngOnInit(){this.validator=A(this.lt)}ngOnChanges(t){for(const e in t)"lt"===e&&(this.validator=A(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","lt","","formControlName",""],["","lt","","formControl",""],["","lt","","ngModel",""]],inputs:{lt:"lt"},features:[a._Bn([st]),a.TTD]}),t})();const dt={provide:i.Cf,useExisting:(0,a.Gpc)(()=>ct),multi:!0};let ct=(()=>{let t=class{ngOnInit(){this.validator=x(this.lte)}ngOnChanges(t){for(const e in t)"lte"===e&&(this.validator=x(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","lte","","formControlName",""],["","lte","","formControl",""],["","lte","","ngModel",""]],inputs:{lte:"lte"},features:[a._Bn([dt]),a.TTD]}),t})();const gt={provide:i.Cf,useExisting:(0,a.Gpc)(()=>ht),multi:!0};let ht=(()=>{let t=class{ngOnInit(){this.validator=b(this.max)}ngOnChanges(t){for(const e in t)"max"===e&&(this.validator=b(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","max","","formControlName",""],["","max","","formControl",""],["","max","","ngModel",""]],inputs:{max:"max"},features:[a._Bn([gt]),a.TTD]}),t})();const ft={provide:i.Cf,useExisting:(0,a.Gpc)(()=>pt),multi:!0};let pt=(()=>{let t=class{ngOnInit(){this.validator=w(this.maxDate)}ngOnChanges(t){for(const e in t)"maxDate"===e&&(this.validator=w(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","maxDate","","formControlName",""],["","maxDate","","formControl",""],["","maxDate","","ngModel",""]],inputs:{maxDate:"maxDate"},features:[a._Bn([ft]),a.TTD]}),t})();const mt={provide:i.Cf,useExisting:(0,a.Gpc)(()=>vt),multi:!0};let vt=(()=>{let t=class{ngOnInit(){this.validator=_(this.min)}ngOnChanges(t){for(const e in t)"min"===e&&(this.validator=_(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","min","","formControlName",""],["","min","","formControl",""],["","min","","ngModel",""]],inputs:{min:"min"},features:[a._Bn([mt]),a.TTD]}),t})();const Ct={provide:i.Cf,useExisting:(0,a.Gpc)(()=>Zt),multi:!0};let Zt=(()=>{let t=class{ngOnInit(){this.validator=y(this.minDate)}ngOnChanges(t){for(const e in t)"minDate"===e&&(this.validator=y(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","minDate","","formControlName",""],["","minDate","","formControl",""],["","minDate","","ngModel",""]],inputs:{minDate:"minDate"},features:[a._Bn([Ct]),a.TTD]}),t})();const qt={provide:i.Cf,useExisting:(0,a.Gpc)(()=>Tt),multi:!0};let Tt=(()=>{let t=class{ngOnInit(){this.validator=O(this.notEqual)}ngOnChanges(t){for(const e in t)"notEqual"===e&&(this.validator=O(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","notEqual","","formControlName",""],["","notEqual","","formControl",""],["","notEqual","","ngModel",""]],inputs:{notEqual:"notEqual"},features:[a._Bn([qt]),a.TTD]}),t})();const At={provide:i.Cf,useExisting:(0,a.Gpc)(()=>xt),multi:!0};let xt=(()=>{let t=class{ngOnInit(){this.validator=I(this.notEqualTo)}validate(t){return this.validator(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","notEqualTo","","formControlName",""],["","notEqualTo","","formControl",""],["","notEqualTo","","ngModel",""]],inputs:{notEqualTo:"notEqualTo"},features:[a._Bn([At])]}),t})();const bt={provide:i.Cf,useExisting:(0,a.Gpc)(()=>wt),multi:!0};let wt=(()=>{let t=class{validate(t){return k(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","number","","formControlName",""],["","number","","formControl",""],["","number","","ngModel",""]],features:[a._Bn([bt])]}),t})();const _t={provide:i.Cf,useExisting:(0,a.Gpc)(()=>yt),multi:!0};let yt=(()=>{let t=class{ngOnInit(){this.validator=D(this.property)}ngOnChanges(t){for(const e in t)"property"===e&&(this.validator=D(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","property","","formControlName",""],["","property","","formControl",""],["","property","","ngModel",""]],inputs:{property:"property"},features:[a._Bn([_t]),a.TTD]}),t})();const Ot={provide:i.Cf,useExisting:(0,a.Gpc)(()=>It),multi:!0};let It=(()=>{let t=class{ngOnInit(){this.validator=N(this.range)}ngOnChanges(t){for(const e in t)"range"===e&&(this.validator=N(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","range","","formControlName",""],["","range","","formControl",""],["","range","","ngModel",""]],inputs:{range:"range"},features:[a._Bn([Ot]),a.TTD]}),t})();const kt={provide:i.Cf,useExisting:(0,a.Gpc)(()=>Dt),multi:!0};let Dt=(()=>{let t=class{ngOnInit(){this.validator=E(this.rangeLength)}ngOnChanges(t){for(const e in t)"rangeLength"===e&&(this.validator=E(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","rangeLength","","formControlName",""],["","rangeLength","","formControl",""],["","rangeLength","","ngModel",""]],inputs:{rangeLength:"rangeLength"},features:[a._Bn([kt]),a.TTD]}),t})();const Nt={provide:i.Cf,useExisting:(0,a.Gpc)(()=>Et),multi:!0};let Et=(()=>{let t=class{validate(t){return G(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","url","","formControlName",""],["","url","","formControl",""],["","url","","ngModel",""]],features:[a._Bn([Nt])]}),t})();const Ft={provide:i.Cf,useExisting:(0,a.Gpc)(()=>Mt),multi:!0};let Mt=(()=>{let t=class{ngOnInit(){this.validator=M(this.uuid)}ngOnChanges(t){for(const e in t)"uuid"===e&&(this.validator=M(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.lG2({type:t,selectors:[["","uuid","","formControlName",""],["","uuid","","formControl",""],["","uuid","","ngModel",""]],inputs:{uuid:"uuid"},features:[a._Bn([Ft]),a.TTD]}),t})();const Gt={arrayLength:d,base64:c,creditCard:g,date:h,dateISO:f,digits:p,email:m,equal:v,equalTo:C,gt:Z,gte:q,json:T,lt:A,lte:x,max:b,maxDate:w,min:_,minDate:y,notEqual:O,notEqualTo:I,number:k,property:D,range:N,rangeLength:E,url:G,uuid:M};var jt=n(8194),Vt=n(2693),Jt=n(6902);function Ut(t,e){if(1&t&&(a.TgZ(0,"span",11),a._uU(1),a.qZA()),2&t){const t=a.oxw().$implicit;a.xp6(1),a.AsE(" // Auditoria abierta: ",t.auditoria_id," - ",t.categorias,"")}}function Bt(t,e){if(1&t&&(a.TgZ(0,"option",9),a._uU(1),a.YNc(2,Ut,2,2,"span",10),a.qZA()),2&t){const t=e.$implicit;a.s9C("value",t.id),a.xp6(1),a.hij("",t.nombre," "),a.xp6(1),a.Q6J("ngIf",t.auditoria_id)}}function $t(t,e){if(1&t&&(a.TgZ(0,"option",9),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.s9C("value",t.id),a.xp6(1),a.AsE("",t.nombre," (",t.id,")")}}function Lt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",12),a.TgZ(1,"button",13),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).auditar()}),a._uU(2,"Auditar"),a.qZA(),a.qZA()}}function St(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",12),a.TgZ(1,"button",13),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).terminar()}),a._uU(2,"Terminar"),a.qZA(),a.qZA()}}function Qt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",2),a.TgZ(1,"fieldset",3),a.TgZ(2,"div",4),a.TgZ(3,"label",5),a._uU(4),a.qZA(),a.TgZ(5,"select",6),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().clienteSeleccionado=e}),a.YNc(6,Bt,3,3,"option",7),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"fieldset",3),a.TgZ(8,"div",4),a.TgZ(9,"label",5),a._uU(10,"Categorias"),a.qZA(),a.TgZ(11,"select",6),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().categoriaSeleccionada=e}),a.YNc(12,$t,2,3,"option",7),a.qZA(),a.qZA(),a.qZA(),a.TgZ(13,"fieldset",3),a.TgZ(14,"div",4),a.YNc(15,Lt,3,0,"div",8),a.YNc(16,St,3,0,"div",8),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(4),a.hij("Clientes ",t.clienteSeleccionado,""),a.xp6(1),a.Q6J("ngModel",t.clienteSeleccionado),a.xp6(1),a.Q6J("ngForOf",t.clientes),a.xp6(5),a.Q6J("ngModel",t.categoriaSeleccionada),a.xp6(1),a.Q6J("ngForOf",t.categorias),a.xp6(3),a.Q6J("ngIf",t.categoriaSeleccionada&&t.clienteSeleccionado),a.xp6(1),a.Q6J("ngIf",t.clienteSeleccionado)}}function Yt(t,e){if(1&t&&(a.TgZ(0,"fieldset"),a.TgZ(1,"div",4),a.TgZ(2,"label",5),a._uU(3),a.qZA(),a.TgZ(4,"div",23),a.TgZ(5,"label",24),a.TgZ(6,"input",25),a.NdJ("ngModelChange",function(t){return e.$implicit.puntaje=t}),a.qZA(),a._UZ(7,"span",26),a._uU(8,"Cumplimiento total "),a.qZA(),a.TgZ(9,"label",24),a.TgZ(10,"input",27),a.NdJ("ngModelChange",function(t){return e.$implicit.puntaje=t}),a.qZA(),a._UZ(11,"span",26),a._uU(12,"Cumplimiento parcial "),a.qZA(),a.TgZ(13,"label",24),a.TgZ(14,"input",28),a.NdJ("ngModelChange",function(t){return e.$implicit.puntaje=t}),a.qZA(),a._UZ(15,"span",26),a._uU(16,"No se cumple "),a.qZA(),a.TgZ(17,"label",24),a.TgZ(18,"input",29),a.NdJ("ngModelChange",function(t){return e.$implicit.puntaje=t}),a.qZA(),a._UZ(19,"span",26),a._uU(20,"No aplica al local"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(3),a.Oqu(t.nombre),a.xp6(3),a.s9C("name",t.id),a.Q6J("ngModel",t.puntaje)("value",2),a.xp6(4),a.s9C("name",t.id),a.Q6J("ngModel",t.puntaje)("value",1),a.xp6(4),a.s9C("name",t.id),a.Q6J("ngModel",t.puntaje)("value",0),a.xp6(4),a.s9C("name",t.id),a.Q6J("ngModel",t.puntaje)("value",-1)}}function zt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",2),a.TgZ(1,"div",14),a.TgZ(2,"div",15),a.TgZ(3,"div",16),a.TgZ(4,"div",17),a.TgZ(5,"fieldset",18),a.TgZ(6,"legend"),a._uU(7),a.qZA(),a.qZA(),a.YNc(8,Yt,21,13,"fieldset",19),a.qZA(),a.TgZ(9,"div",20),a.TgZ(10,"button",13),a.NdJ("click",function(){return a.CHM(t),a.oxw().guardar()}),a._uU(11,"Enviar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(12,"div",21),a.TgZ(13,"button",22),a.NdJ("click",function(){return a.CHM(t),a.oxw().verFiltros()}),a._uU(14,"Volver"),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(7),a.Oqu(t.nombreCategoria),a.xp6(1),a.Q6J("ngForOf",t.requisitos)}}const Ht=n(1607);let Rt=(()=>{class t{constructor(t,e,n){this.http=e,this.router=n,this.filtros=!0,this.nombreCategoria="",this.estado="",this.idAuditoria=1,this.blackList=["bad@email.com","some@mail.com","wrong@email.co"],this.saveForm={puntos:"",auditoria_id:"",requisito_id:""};let r=new i.NI("",i.kI.required),a=new i.NI("",Gt.equalTo(r));this.valForm=t.group({sometext:t.control(null,i.kI.required),checkbox:t.control(null,i.kI.required),radio:t.control("",i.kI.required),select:t.control(null,i.kI.required),digits:t.control(null,i.kI.pattern("^[0-9]+$")),minlen:t.control(null,i.kI.minLength(6)),maxlen:t.control(null,i.kI.maxLength(10)),email:t.control(null,Gt.email),url:t.control(null,Gt.url),date:t.control(null,Gt.date),number:t.control(null,i.kI.compose([i.kI.required,Gt.number])),alphanum:t.control(null,i.kI.pattern("^[a-zA-Z0-9]+$")),minvalue:t.control(null,Gt.min(6)),maxvalue:t.control(null,Gt.max(10)),minwords:t.control(null,this.minWords(6)),maxwords:t.control(null,this.maxWords(10)),minmaxlen:t.control(null,Gt.rangeLength([6,10])),range:t.control(null,Gt.range([10,20])),rangewords:t.control(null,i.kI.compose([this.minWords(6),this.maxWords(10)])),email_bl:t.control(null,this.checkBlackList(this.blackList)),passwordGroup:t.group({password:r,confirmPassword:a})})}auditar(){const t=this.getDropDownText(this.clienteSeleccionado,this.clientes)[0];if(t.auditoria_id){const e=this.getDropDownText(this.categoriaSeleccionada,this.categorias)[0];if(!e)return void alert("Seleccione categoria");this.nombreCategoria=e.nombre,this.http.get("http://localhost:3000/auditorias/"+t.auditoria_id).subscribe(t=>{this.auditoria=t,this.http.get("http://localhost:3000/requisitos?categoria="+e.id).subscribe(t=>{this.requisitos=t,this.estado="cerrada",this.filtros=!1})})}else this.http.post("http://localhost:3000/auditorias",{servicio_id:1,usuario_id:1,cliente_id:this.clienteSeleccionado}).subscribe(t=>{this.auditoria=t,this.nombreCategoria=this.getDropDownText(this.categoriaSeleccionada,this.categorias)[0].nombre,this.http.get("http://localhost:3000/requisitos?categoria="+this.categoriaSeleccionada).subscribe(t=>{this.requisitos=t,this.filtros=!1})})}terminar(){const t=this.getDropDownText(this.clienteSeleccionado,this.clientes)[0];t.auditoria_id&&this.http.put("http://localhost:3000/auditorias/"+t.auditoria_id,{}).subscribe(t=>{this.auditoria=t}),this.ngOnInit()}guardar(){let t=[];this.requisitos.forEach(e=>{t.push({auditoria_id:this.auditoria.id,requisito_id:e.id,puntaje:e.puntaje})}),this.http.post("http://localhost:3000/puntos_requisitos_auditoria",t).subscribe(t=>{this.save=t,this.saveForm={puntos:"",auditoria_id:"",requisito_id:""},Ht("Perfecto!","Tu auditoria se ha guardado correctamente","success"),this.filtros=!0,this.ngOnInit()})}verFiltros(){this.filtros=!0}onItemChange(t,e){}getDropDownText(t,e){return jt.filter(e,function(e){return jt.includes(t,e.id)})}submitForm(t,e){t.preventDefault();for(let n in this.valForm.controls)this.valForm.controls[n].markAsTouched()}minWords(t){return e=>(e.value||"").split(" ").length>=t?null:{minWords:e.value}}maxWords(t){return e=>(e.value||"").split(" ").length<=t?null:{maxWords:e.value}}checkBlackList(t){return e=>t.indexOf(e.value)<0?null:{blacklist:e.value}}ngOnInit(){this.http.get("http://localhost:3000/requisitos").subscribe(t=>{this.requisitos=t}),this.http.get("http://localhost:3000/usuarios/auditoria?rol=cliente").subscribe(t=>{this.clientes=t}),this.http.get("http://localhost:3000/categorias").subscribe(t=>{this.categorias=t})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(i.qu),a.Y36(Vt.eN),a.Y36(Jt.F0))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-bromatologia"]],decls:9,vars:2,consts:[[1,"content-heading"],["class","container-fluid",4,"ngIf"],[1,"container-fluid"],[1,"last-child"],[1,"form-group","row"],[1,"col-md-2","col-form-label"],[1,"custom-select","custom-select-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","text-center col-md-3",4,"ngIf"],[3,"value"],["class","text-secondary font-weight-bold",4,"ngIf"],[1,"text-secondary","font-weight-bold"],[1,"text-center","col-md-3"],[1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-lg-12"],[1,"card","card-default"],[1,"card-body"],[1,"b0"],[4,"ngFor","ngForOf"],[1,"text-info",2,"text-align","center","margin-bottom","20px"],[1,"text-left"],[1,"btn","btn-secondary",3,"click"],[1,"col-md-10"],[1,"c-radio"],["id","inlineradio1","type","radio",3,"ngModel","name","value","ngModelChange"],[1,"fa","fa-circle"],["id","inlineradio4","type","radio",3,"ngModel","name","value","ngModelChange"],["id","inlineradio2","type","radio",3,"ngModel","name","value","ngModelChange"],["id","inlineradio3","type","radio",3,"ngModel","name","value","ngModelChange"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div"),a.TgZ(2,"h1"),a._uU(3,"Auditoria de Bromatologia"),a.qZA(),a._UZ(4,"br"),a.TgZ(5,"h4"),a._uU(6,"Indicar en la tabla adjunta, de acuerdo al parametro evaluado:"),a.qZA(),a.qZA(),a.qZA(),a.YNc(7,Qt,17,7,"div",1),a.YNc(8,zt,15,2,"div",1)),2&t&&(a.xp6(7),a.Q6J("ngIf",e.filtros),a.xp6(1),a.Q6J("ngIf",!e.filtros))},directives:[r.O5,i.EJ,i.JJ,i.On,r.sg,i.YN,i.Kr,i._,i.Fj],styles:[""]}),t})();var Wt=n(1628),Pt=n(9593);let Xt=(()=>{class t{constructor(t){this.router=t}refresh(t){throw new Error("Method not implemented.")}agInit(t){this.params=t}btnClickedHandler(){this.router.navigate(["/auditorias/"+this.params.data.id])}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(Jt.F0))},t.\u0275cmp=a.Xpm({type:t,selectors:[["btn-cell-renderer"]],decls:2,vars:0,consts:[["type","button",1,"btn","btn-xs","btn-info",3,"click"],[1,"fas","fa-bars"]],template:function(t,e){1&t&&(a.TgZ(0,"button",0),a.NdJ("click",function(){return e.btnClickedHandler()}),a._UZ(1,"em",1),a.qZA())},encapsulation:2}),t})(),Kt=(()=>{class t{constructor(t){this.http=t,this.resizeEvent="resize.ag-grid",this.$win=$(window),this.columnDefsFilter=[{headerName:"Auditoria",field:"id",width:60,filter:"set"},{headerName:"ClienteID",field:"cliente_id",width:60},{headerName:"Cliente",field:"nombre",width:120,filter:"set"},{headerName:"Fecha",field:"fecha",width:120,filter:"number"},{field:"Detalle",cellRenderer:"btnCellRenderer",cellRendererParams:{clicked:function(t){alert(`${t} was clicked`)}},width:60}],this.frameworkComponents={btnCellRenderer:Xt},this.gridOptions={headerHeight:40,columnDefs:this.columnDefsFilter}}ngOnInit(){this.http.get("http://localhost:3000/auditorias").subscribe(t=>{this.auditorias=t})}ngOnDestroy(){this.$win.off(this.resizeEvent)}onQuickFilterChanged(t){var e,n;null===(n=null===(e=this.gridOptions)||void 0===e?void 0:e.api)||void 0===n||n.setQuickFilter(t.target.value)}gridReady(t){t.api.sizeColumnsToFit(),this.$win.on(this.resizeEvent,()=>{setTimeout(()=>{t.api.sizeColumnsToFit()})})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(Vt.eN))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-auditorias"]],decls:9,vars:3,consts:[[1,"content-heading",2,"background-color","#4f5568","color","white"],[1,"container-fluid"],[1,"row"],[1,"col-xl-4","col-lg-6"],["placeholder","Filter...","type","text",1,"mb","form-control",3,"keyup"],["enableFilter","",1,"ag-angle",2,"width","100%","height","400px",3,"rowData","frameworkComponents","gridOptions","gridReady"],["agGrid",""]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div"),a._uU(2,"Lista de Auditorias "),a.qZA(),a.qZA(),a.TgZ(3,"div",1),a.TgZ(4,"div",2),a.TgZ(5,"div",3),a.TgZ(6,"input",4),a.NdJ("keyup",function(t){return e.onQuickFilterChanged(t)}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"ag-grid-angular",5,6),a.NdJ("gridReady",function(t){return e.gridReady(t)}),a.qZA(),a.qZA()),2&t&&(a.xp6(7),a.Q6J("rowData",e.auditorias)("frameworkComponents",e.frameworkComponents)("gridOptions",e.gridOptions))},directives:[Wt.N8],styles:[""]}),t})();var te=n(5229),ee=n(2531),ne=n(6137);function re(t,e){if(1&t&&(a.TgZ(0,"tr"),a.TgZ(1,"td"),a.TgZ(2,"strong"),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"td",24),a.TgZ(5,"a",25),a._uU(6),a.qZA(),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(3),a.hij("",t.nombre," "),a.xp6(1),a.s9C("tooltip",t.detalle),a.xp6(1),a.s9C("href",t.url,a.LSH),a.xp6(1),a.Oqu(t.normativa),a.xp6(2),a.Oqu(t.puntaje_nombre)}}function ie(t,e){if(1&t&&(a.TgZ(0,"div",3),a.TgZ(1,"div",15),a.TgZ(2,"div",16),a.TgZ(3,"div"),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"h4",17),a._uU(6),a.qZA(),a.qZA(),a.TgZ(7,"div",5),a.TgZ(8,"div",6),a.TgZ(9,"div",7),a.TgZ(10,"div",8),a.TgZ(11,"div",9),a._UZ(12,"progressbar",10),a.qZA(),a.qZA(),a.qZA(),a.TgZ(13,"div",18),a.TgZ(14,"div",19),a._uU(15),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(16,"table",20),a.TgZ(17,"tbody"),a.YNc(18,re,9,5,"tr",11),a.qZA(),a.qZA(),a.TgZ(19,"div",21),a.TgZ(20,"strong",22),a._uU(21,"Acciones a tomar:\xa0"),a.qZA(),a.TgZ(22,"span",23),a._uU(23," Clausurar el lugar"),a.qZA(),a.qZA(),a.qZA()),2&t){const t=a.oxw().$implicit,e=a.oxw();a.xp6(3),a.Gre("badge badge-",e.auditoria.categorias[t.nombre].puntaje_porcentaje<60?"danger":"success",""),a.xp6(1),a.Oqu(e.auditoria.categorias[t.nombre].puntaje_porcentaje<60?"No cumple":"Cumple"),a.xp6(2),a.Oqu(t.nombre),a.xp6(6),a.s9C("type",e.auditoria.categorias[t.nombre].puntaje_porcentaje<60?"warning":"success"),a.Q6J("value",e.auditoria.categorias[t.nombre].puntaje_porcentaje),a.xp6(3),a.AsE("Puntos: ",e.auditoria.categorias[t.nombre].puntaje_total," de ",e.auditoria.categorias[t.nombre].puntaje_maximo,""),a.xp6(3),a.Q6J("ngForOf",e.auditoria.categorias[t.nombre].requisitos)}}function ae(t,e){if(1&t&&(a.TgZ(0,"div"),a.YNc(1,ie,24,10,"div",14),a.qZA()),2&t){const t=e.$implicit,n=a.oxw();a.xp6(1),a.Q6J("ngIf",n.auditoria.categorias[t.nombre])}}const oe=[{path:"bromatologia",component:Rt},{path:"",component:Kt},{path:":id",component:(()=>{class t{constructor(t,e,n){this.router=t,this.colors=e,this.http=n,this.auditoria={cliente:""}}volver(){this.router.navigate(["auditorias"])}ngOnInit(){const t=location.pathname.split("/").pop();this.http.get("http://localhost:3000/auditorias/detalle/"+t).subscribe(t=>{console.log("auditorias",t),this.auditoria=t}),this.http.get("http://localhost:3000/categorias").subscribe(t=>{console.log("categorias",t),this.categorias=t})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(Jt.F0),a.Y36(te.c),a.Y36(Vt.eN))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-detalle"]],decls:22,vars:6,consts:[[1,"content-heading",2,"color","white","background-color","#4f5568"],[1,"row"],[1,"col-xl-12","col-lg-12"],[1,"card","b"],[1,"card-header",2,"font-size","large"],[1,"card-body"],[1,"d-flex","align-items-center"],[1,"w-100"],["tooltip","Porcentaje cumplimiento"],[1,"progress","progress-xs","m-0"],[1,"progress-xs","m-0",3,"type","value"],[4,"ngFor","ngForOf"],[1,"text-left"],[1,"btn","btn-secondary",3,"click"],["class","card b",4,"ngIf"],[1,"card-header"],[1,"float-right"],[1,"m-0"],[1,"wd-xxs","text-right"],[1,"text-bold","text-muted"],[1,"table"],[1,"card-footer"],[1,"text-info"],[1,"text-danger"],[3,"tooltip"],[3,"href"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a._uU(1," DETALLES DE AUDITORIA: \xa0\xa0\xa0"),a.TgZ(2,"strong"),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"div",1),a.TgZ(5,"div",2),a.TgZ(6,"div",3),a.TgZ(7,"div",4),a.TgZ(8,"strong"),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"div",5),a.TgZ(11,"div",6),a.TgZ(12,"div",7),a.TgZ(13,"div",8),a.TgZ(14,"div",9),a._UZ(15,"progressbar",10),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(16,"div",1),a.TgZ(17,"div",2),a.YNc(18,ae,2,1,"div",11),a.qZA(),a.qZA(),a.TgZ(19,"div",12),a.TgZ(20,"button",13),a.NdJ("click",function(){return e.volver()}),a._uU(21,"Volver"),a.qZA(),a.qZA()),2&t&&(a.xp6(3),a.Oqu(e.auditoria.cliente),a.xp6(6),a.AsE("Puntaje total: ",e.auditoria.puntaje_total," de ",e.auditoria.puntaje_maximo,""),a.xp6(6),a.s9C("type",e.auditoria.puntaje_porcentaje<60?"warning":"success"),a.Q6J("value",e.auditoria.puntaje_porcentaje),a.xp6(3),a.Q6J("ngForOf",e.categorias))},directives:[ee.i9,ne.O1,r.sg,r.O5],styles:[""]}),t})()}];let le=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[r.ez,Pt.m,Jt.Bz.forChild(oe),Wt.sF.withComponents([Kt,Xt])],Jt.Bz]}),t})()}}]);